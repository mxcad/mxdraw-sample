{
  "version": 3,
  "sources": ["../../mxdraw/dist/lib/MxModule/MxDbLeadComment/draw.js", "../../mxdraw/dist/lib/MxModule/MxDbLeadComment/index.js"],
  "sourcesContent": ["import MxDbLeadComment from\".\";import McEdGetPointWorldDrawObject from\"../McEdGetPointWorldDrawObject\";import MrxDbgUiPrPoint from\"../MrxDbgUiPrPoint\";import MxFun from\"../MxFun\";export default function drawMxDbLeadComment(){const t=new MrxDbgUiPrPoint;t.setMessage(\"\\n指定第一点:\"),t.go(e=>{if(0!=e)return;const o=t.value();let n=new MxDbLeadComment;n.point1=o.clone(),n.textHeight=MxFun.screenCoordLong2Doc(50);let r=prompt(\"请输入文字批注\",\"批注\");if(!r)return;n.text=r,n.textWidth=MxFun.screenCoordLong2Doc(10*r.length),n.fixedSize=!0,n.fixedSize&&(n.textHeight=50,n.textWidth=50*r.length);const i=new McEdGetPointWorldDrawObject;i.setDraw((t,e)=>{n.point2=t,e.drawCustomEntity(n)}),t.setBasePt(o),t.setUseBasePt(!0),t.setUserDraw(i),t.setMessage(\"\\n指定第二点:\"),t.go(e=>{if(0!=e)return void console.log(e);const o=t.value();n.point2=o,MxFun.addToCurrentSpace(n)})})};", "import{addRegisterMxDbEntity}from\"../../tools/registerMxDbEntity\";import MxDbEntity from\"../MxDbEntity\";import MxThreeJS from\"../MxThreeJS\";import drawMxDbLeadComment from\"./draw\";class MxDbLeadComment extends MxDbEntity{constructor(){super(...arguments),this.point1=new THREE.Vector3,this.point2=new THREE.Vector3,this.text=\"\",this.textHeight=20,this.textWidth=0,this.fixedSize=!1}getTypeName(){return\"MxDbLeadComment\"}create(){return new MxDbLeadComment}worldDraw(t){if(t.drawLine(this.point1,this.point2),this.text.length>0){const e=new THREE.Vector3;let i=this.textHeight,n=this.textWidth,o=t.getMxObject();this.fixedSize&&(i=o.screenCoordLong2Doc(i),n=o.screenCoordLong2Doc(n));let h=MxThreeJS.clacTextSpriteSize(this.text,i,n);e.x=this.point2.x+.5*h.textwidth,e.y=this.point2.y+.5*h.allTextHeight,t.drawText(this.text,i,0,e,n);const s=new THREE.Vector3;s.x=this.point2.x+h.textwidth,s.y=this.point2.y,t.drawLine(s,this.point2)}}getGripPoints(){let t=[];return t.push(this.point1),t.push(this.point2),t}moveGripPointsAt(t,e){return 0==t?this.point1.add(e):1==t&&this.point2.add(e),!0}dwgIn(t){return this.onDwgIn(t),this.point1.copy(t.point1),this.point2.copy(t.point2),this.text=t.text.substr(0),this.textHeight=t.textHeight,t.textWidth&&(this.textWidth=t.textWidth),this.fixedSize=t.fixedSize,!0}dwgOut(t){return this.onDwgOut(t),t.point1=this.point1,t.point2=this.point2,t.textHeight=this.textHeight,t.text=this.text,t.textWidth=this.textWidth,t.fixedSize=this.fixedSize,t}onViewChange(){return!!this.fixedSize&&(this.setNeedUpdateDisplay(!1),!0)}}MxDbLeadComment.cmd=\"Mx_Comment\",MxDbLeadComment.draw=drawMxDbLeadComment,addRegisterMxDbEntity(MxDbLeadComment);export default MxDbLeadComment;"],
  "mappings": "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",
  "names": ["t", "e", "o"]
}
