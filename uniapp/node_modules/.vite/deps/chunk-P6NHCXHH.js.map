{
  "version": 3,
  "sources": ["../../mxdraw/dist/lib/MxModule/MxDbRectBoxLeadComment/draw.js", "../../mxdraw/dist/lib/MxModule/MxDbRectBoxLeadComment/index.js"],
  "sourcesContent": ["import MxDbRectBoxLeadComment from\".\";import McEdGetPointWorldDrawObject from\"../McEdGetPointWorldDrawObject\";import MrxDbgUiPrBaseReturn from\"../MrxDbgUiPrBaseReturn\";import MrxDbgUiPrPoint from\"../MrxDbgUiPrPoint\";import MxFun from\"../MxFun\";export default function drawMxDbRectBoxLeadComment(){const t=new MrxDbgUiPrPoint,e=MxFun.getCurrentDraw(),r=new McEdGetPointWorldDrawObject,o=new MxDbRectBoxLeadComment;o.setLineWidth(3),o.setLineWidthByPixels(!0),t.setMessage(\"\\n云线框起始点:\"),t.go(n=>{o.radius=MxFun.screenCoordLong2Doc(8),n==MrxDbgUiPrBaseReturn.kOk&&(o.point1=t.value(),r.setDraw(t=>{o.point2=t,r.drawCustomEntity(o)}),t.setUserDraw(r),t.setMessage(\"\\n云线框结束点:\"),t.go(n=>{if(n!=MrxDbgUiPrBaseReturn.kOk)return;o.point2=t.value(),r.setDraw(t=>{o.point3=t,r.drawCustomEntity(o)});let i=prompt(\"请输入文字批注\",\"批注\");i||(i=\"默认批注文字\"),o.text=i,o.textWidth=MxFun.screenCoordLong2Doc(10*i.length),o.textHeight=MxFun.screenCoordLong2Doc(5*i.length),o.fixedSize=!0,o.fixedSize&&(o.textHeight=20,o.textWidth=20*i.length),t.setMessage(\"\\n审图标注点:\"),t.go(r=>{r==MrxDbgUiPrBaseReturn.kOk&&(o.point3=t.value(),e.addMxEntity(o))})}))})};", "import MxDbLeadComment from\"../MxDbLeadComment\";import MxDbCloudLine from\"../MxDbCloudLine\";import MxDbEntity from\"../MxDbEntity\";import MxType from\"../MxType\";import{addRegisterMxDbEntity}from\"../../tools/registerMxDbEntity\";import drawMxDbRectBoxLeadComment from\"./draw\";class MxDbRectBoxLeadComment extends MxDbEntity{constructor(){super(...arguments),this.point1=new THREE.Vector3,this.point2=new THREE.Vector3,this.point3=new THREE.Vector3,this.text=\"\",this.textHeight=20,this.radius=16,this.textWidth=0,this.fixedSize=!1}getTypeName(){return\"MxDbRectBoxLeadComment\"}create(){return new MxDbRectBoxLeadComment}getCloudLine(){let t=new MxDbCloudLine;t.setRadius(this.radius);let e=this.point1.clone(),i=this.point2.clone();if(e.x>i.x){let t=e.x;e.x=i.x,i.x=t}if(e.y>i.y){let t=e.y;e.y=i.y,i.y=t}let o=new THREE.Vector3(e.x,i.y,e.z);o=t.addLine(e,o),i=new THREE.Vector3(i.x,o.y,i.z),i=t.addLine(o,i);let n=new THREE.Vector3(i.x,e.y,e.z);n=t.addLine(i,n);let d=e=t.addLine(n,e),s=e.distanceTo(this.point3);return s>o.distanceTo(this.point3)&&(d=o,s=o.distanceTo(this.point3)),s>i.distanceTo(this.point3)&&(d=i,s=i.distanceTo(this.point3)),s>n.distanceTo(this.point3)&&(d=n,s=n.distanceTo(this.point3)),{cloudLine:t,pt1:e,pt2:o,pt3:i,pt4:n,leadPt:d}}worldDraw(t){let e=this.getCloudLine();if(e.cloudLine.worldDraw(t),this.text.length>0){let i=e.leadPt,o=new MxDbLeadComment;o.point1=i,o.point2=this.point3,o.text=this.text,o.textHeight=this.textHeight,o.textWidth=this.textWidth,o.fixedSize=this.fixedSize,o.worldDraw(t)}}getGripPoints(){let t=[];return t.push(this.point1),t.push(this.point2),t.push(this.point3),t}moveGripPointsAt(t,e){return 0==t?this.point1.add(e):1==t?this.point2.add(e):2==t&&this.point3.add(e),!0}dwgIn(t){return this.onDwgIn(t),this.point1.copy(t.point1),this.point2.copy(t.point2),this.point3.copy(t.point3),this.text=t.text.substr(0),this.textHeight=t.textHeight,this.radius=t.radius,t.textWidth&&(this.textWidth=t.textWidth),this.fixedSize=t.fixedSize,!0}dwgOut(t){if(this.onDwgOut(t),t.point1=this.point1,t.point2=this.point2,t.point3=this.point3,t.textHeight=this.textHeight,t.text=this.text,t.radius=this.radius,t.textWidth=this.textWidth,t.fixedSize=this.fixedSize,t.type===MxType.MxCloneType.kSaveDwgClone){let e=this.getCloudLine(),i=e.cloudLine.reCalculateDrawGeometryPoint();t.cachePoint=i||[],t.leadPt=e.leadPt}return t}onViewChange(){return!!this.fixedSize&&(this.setNeedUpdateDisplay(!1),!0)}}MxDbRectBoxLeadComment.cmd=\"Mx_CheckDraw\",MxDbRectBoxLeadComment.draw=drawMxDbRectBoxLeadComment,addRegisterMxDbEntity(MxDbRectBoxLeadComment);export default MxDbRectBoxLeadComment;"],
  "mappings": "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",
  "names": ["t", "n", "r", "t"]
}
