{
  "version": 3,
  "sources": ["../../mxdraw/dist/lib/MxModule/MxDbAnyLine/draw.js", "../../mxdraw/dist/lib/MxModule/MxDbAnyLine/index.js"],
  "sourcesContent": ["import MxDbAnyLine from\".\";import McEdGetPointWorldDrawObject from\"../McEdGetPointWorldDrawObject\";import MrxDbgUiPrBaseReturn from\"../MrxDbgUiPrBaseReturn\";import MrxDbgUiPrPoint from\"../MrxDbgUiPrPoint\";import MxFun from\"../MxFun\";export default function drawMxDbAnyLine(){const r=new MrxDbgUiPrPoint,t=MxFun.getCurrentDraw(),e=new McEdGetPointWorldDrawObject,n=new MxDbAnyLine;r.setUserDraw(e),r.setMessage(\"\\n点击开始画线:\"),r.go(o=>{o===MrxDbgUiPrBaseReturn.kOk&&(n.points.push(r.value()),e.setDraw(r=>{n.points.push(r.clone()),e.drawCustomEntity(n)})),r.setMessage(\"\\n再次点击结束画线:\"),r.go(r=>{r===MrxDbgUiPrBaseReturn.kOk&&t.addMxEntity(n)})})};", "import MxDbEntity from\"../MxDbEntity\";import McGiWorldDrawType from\"../McGiWorldDrawType\";import drawMxDbAnyLine from\"./draw\";import{addRegisterMxDbEntity}from\"../../tools/registerMxDbEntity\";const propertyDbKeys=[\"points\"];class MxDbAnyLine extends MxDbEntity{constructor(){super(...arguments),this.points=[]}getTypeName(){return\"MxDbAnyLine\"}create(){return new MxDbAnyLine}worldDraw(t){let e=t.getMxObject();const n=(new THREE.Box3).setFromPoints(this.points);let r=new THREE.Vector3;if(n.getCenter(r),t.drawLines(this.points),t.getType()===McGiWorldDrawType.kSelectDraw){const i=new THREE.Vector3;n.getSize(i),i.addScalar(e.screenCoordLong2Doc(20));const o=i.x/2,s=i.y/2,y={x:r.x-o,y:r.y-s},x={x:r.x+o,y:r.y-s},d={x:r.x+o,y:r.y+s},p={x:r.x-o,y:r.y+s};t.drawLine(y.x,y.y,x.x,x.y),t.drawLine(x.x,x.y,d.x,d.y),t.drawLine(d.x,d.y,p.x,p.y),t.drawLine(p.x,p.y,y.x,y.y)}}setPoints(t){return this.points=t,this}getCenter(){const t=new THREE.Geometry;t.vertices=this.points;const e=new THREE.Vector3;return t.computeBoundingBox(),t.boundingBox.getCenter(e),e}getGripPoints(){return[this.getCenter()]}moveGripPointsAt(t,e){return 0===t&&this.points.forEach(t=>{t.add(e)}),!0}dwgIn(t){return this.onDwgIn(t),this.dwgInHelp(t,propertyDbKeys),!0}dwgOut(t){return this.onDwgOut(t),this.dwgOutHelp(t,propertyDbKeys),t}}MxDbAnyLine.cmd=\"Mx_AnyLine\",MxDbAnyLine.draw=drawMxDbAnyLine,addRegisterMxDbEntity(MxDbAnyLine);export default MxDbAnyLine;"],
  "mappings": "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",
  "names": ["r", "t"]
}
