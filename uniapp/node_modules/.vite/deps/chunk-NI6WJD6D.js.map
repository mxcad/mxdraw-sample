{
  "version": 3,
  "sources": ["../../mxdraw/dist/lib/MxModule/MxDbLeadTag/draw.js", "../../mxdraw/dist/lib/MxModule/MxDbLeadTag/index.js"],
  "sourcesContent": ["var __awaiter=this&&this.__awaiter||function(t,n,r,i){return new(r||(r=Promise))(function(e,o){function a(t){try{c(i.next(t))}catch(t){o(t)}}function u(t){try{c(i.throw(t))}catch(t){o(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof r?n:new r(function(t){t(n)})).then(a,u)}c((i=i.apply(t,n||[])).next())})};import MxDbLeadTag from\".\";import MrxDbgUiPrPoint from\"../MrxDbgUiPrPoint\";import MxFun from\"../MxFun\";export default function drawMxDbLeadTag(){return __awaiter(this,void 0,void 0,function*(){let t=yield(new MrxDbgUiPrPoint).go();if(!t)return;let n=prompt(\"请输入文字批注\",\"批注\");if(!n)return;const r=new MxDbLeadTag;r.point=t,r.text=n,MxFun.addToCurrentSpace(r)})};", "import{addRegisterMxDbEntity}from\"../../tools/registerMxDbEntity\";import MxDbEntity from\"../MxDbEntity\";import MxThreeJS from\"../MxThreeJS\";import drawMxDbLeadTag from\"./draw\";class MxDbLeadTag extends MxDbEntity{constructor(){super(...arguments),this.point=new THREE.Vector3,this.leadLen=88,this.text=\"\",this.textHeight=24}getTypeName(){return\"MxDbLeadTag\"}createDots(e,t){const{x:n,y:o,z:r}=e,i=new THREE.Shape;i.arc(n,o,t.screenCoordLong2Doc(6),0,2*Math.PI,!0);const s=new THREE.Path;s.arc(n,o,t.screenCoordLong2Doc(3),0,2*Math.PI,!0),i.holes.push(s);const a=new THREE.ShapeGeometry(i),d=new THREE.MeshPhongMaterial({color:\"#ff0000\",transparent:!0}),x=new THREE.Shape;x.arc(n,o,t.screenCoordLong2Doc(3),0,2*Math.PI,!0);const c=new THREE.ShapeGeometry(x),E=new THREE.MeshPhongMaterial({color:\"#e2da8f\",transparent:!0}),h=new THREE.Mesh(a,d),g=new THREE.Mesh(c,E);return h.add(g),h}worldDraw(e){let t=e.getMxObject();const n=this.createDots(this.point,t);if(e.drawEntity(n),n.geometry.computeBoundingBox(),e.drawSelectLine(n.geometry.boundingBox.max,n.geometry.boundingBox.min),2===e.getType())return;let o=e.getMxObject().screenCoordLong2Doc(this.leadLen),r=new THREE.Vector3(this.point.x+2*o,this.point.y+o,0);const i=r.x-o,s=new THREE.Vector3(i,r.y,r.z);e.setLineWidth(4),e.setColor(\"#ffe605\"),e.drawLines([this.point,s,r]);const a=e.getMxObject().screenCoordLong2Doc(this.textHeight),d=r.clone().setX(r.x);e.setColor(16744448);const x=MxThreeJS.creatTextSprite(this.text,d,a,0,e.getColor());if(x){const t=new THREE.Box3,n=new THREE.Vector3;t.expandByObject(x),t.getSize(n),x.position.setX(x.position.x+n.x/2);const o=e.getMxObject().screenCoordLong2Doc(5),r=t.min.clone().setX(t.min.x+n.x/2).setY(t.min.y-o),i=t.max.clone().setX(t.max.x+n.x/2).setY(t.min.y+o);i.setY(t.max.y+o);const s=new THREE.Vector3(r.x,i.y),a=new THREE.Vector3(i.x,r.y);e.setColor(\"#ffffff\"),e.setLineWidth(0),e.drawLine(r,s),e.drawLine(i,a),e.drawLine(r,a),e.drawLine(s,i);const d=o/2,c=[],E=[];c.push(new THREE.Vector3(s.x+d,s.y-o,s.z),new THREE.Vector3(s.x+d,s.y-d,s.z),new THREE.Vector3(s.x+o,s.y-d,s.z)),E.push(new THREE.Vector3(a.x-d,a.y+o,a.z),new THREE.Vector3(a.x-d,a.y+d,a.z),new THREE.Vector3(a.x-o,a.y+d,a.z)),e.drawLines(c),e.drawLines(E),e.setOpacity(.5),e.setColor(\"#663244\"),e.setRenderOrder(-100),e.drawSolid([r,s,i,a]),e.setRenderOrder(100),e.drawEntity(x)}}getGripPoints(){return[this.point]}onViewChange(){return this.setNeedUpdateDisplay(),!0}moveGripPointsAt(e,t){return 0===e&&this.point.add(t),!0}dwgIn(e){return this.onDwgIn(e),this.dwgInHelp(e,[\"point\",\"text\",\"textHeight\",\"leadLen\"]),!0}dwgOut(e){return this.onDwgOut(e),this.dwgOutHelp(e,[\"point\",\"text\",\"textHeight\",\"leadLen\"]),e}}MxDbLeadTag.cmd=\"Mx_LeadTag\",MxDbLeadTag.draw=drawMxDbLeadTag,addRegisterMxDbEntity(MxDbLeadTag);export default MxDbLeadTag;"],
  "mappings": "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",
  "names": ["t", "n", "t", "n", "o", "r", "i", "s", "a", "d"]
}
